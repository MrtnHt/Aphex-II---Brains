/* Base layout & utilities */
:root{
  --glass-bg: rgba(255,255,255,0.06);
  --glass-border: rgba(255,255,255,0.12);
  --glass-accent: rgba(99,102,241,0.18);
  --matrix-green: #00ff41;
}
*{box-sizing:border-box}
html,body,#app{height:100%}
body{margin:0;transition:background 300ms ease,color 300ms ease}

/* Modal base */
.settings-modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:60}
.settings-modal.hidden{display:none}
.modal-inner{width:min(720px,95%);background:var(--glass-bg);border:1px solid var(--glass-border);padding:20px;border-radius:12px;backdrop-filter:blur(8px)}
.modal-inner h3{margin:0 0 10px 0}
.modal-inner label{display:block;font-size:12px;margin-top:10px}
.modal-inner input{width:100%;padding:8px;margin-top:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
.modal-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}

/* Shared components */
.app-header{position:sticky;top:0;z-index:30}
.sidebar{min-width:200px}
.menu-list{list-style:none;padding:0;margin:0}
.menu-list li{padding:6px 0}
.messages{overflow:auto}
.message{padding:10px;margin-bottom:8px;border-radius:8px}
.message.user{align-self:flex-end}
.message.assistant{align-self:flex-start}

/* THEME: Matrix (default) */
body.theme-matrix{
  background:#000;color:var(--matrix-green);font-family:'Fira Code',monospace;background-color:#000;
}
/* CRT / scanline overlay */
body.theme-matrix::before{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:50;
  background-image:repeating-linear-gradient(transparent, transparent 2px, rgba(0,0,0,0.45) 3px);
  mix-blend-mode:overlay;opacity:0.55;
}
body.theme-matrix::after{
  content:"";position:fixed;inset:0;pointer-events:none;z-index:51;background:linear-gradient(180deg, rgba(0,255,65,0.02), rgba(0,255,65,0.0));
}

/* Sidebar minimal / ASCII feel */
body.theme-matrix .sidebar{width:220px;padding:16px;background:transparent;border-right:1px dashed rgba(0,255,65,0.06)}
body.theme-matrix .sidebar .menu-list{font-family:'Fira Code',monospace;color:var(--matrix-green);opacity:0.95}
body.theme-matrix .sidebar .menu-list li{padding:4px 0}

/* Chat looks like terminal */
body.theme-matrix .messages{background:transparent;padding:12px}
body.theme-matrix .message{background:transparent;border:1px dashed rgba(0,255,65,0.06);color:var(--matrix-green);font-family:'Fira Code',monospace}
body.theme-matrix .message.assistant{border-left:4px solid rgba(0,255,65,0.12);padding-left:12px}

/* Cursor effect for typing */
.type-caret{display:inline-block;width:8px;height:1.2em;background:var(--matrix-green);margin-left:6px;animation:blink 1s steps(1) infinite}
@keyframes blink{50%{opacity:0}}

/* THEME: Glass */
body.theme-glass{
  background:linear-gradient(135deg,#0f172a 0%, #2a164d 60%);color:#e6eef8;font-family:ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;
}
body.theme-glass .sidebar{width:280px;background:rgba(255,255,255,0.04);border-right:1px solid rgba(255,255,255,0.06);backdrop-filter:blur(16px);border-radius:12px;margin:12px}
body.theme-glass .messages{margin:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,0.06);border-radius:12px;padding:18px}
body.theme-glass .message{background:transparent;border:none;color:inherit}
body.theme-glass .message.user{background:linear-gradient(90deg, rgba(99,102,241,0.12), rgba(99,102,241,0.06));padding:10px}
body.theme-glass .message.assistant{background:rgba(255,255,255,0.02);padding:10px}

/* Controls style slight neutral */
.switch-btn, .settings-btn, .send-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit}
.message-input{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);color:inherit}

/* Responsive tweaks */
@media (max-width:900px){
  .sidebar{display:none}
}
